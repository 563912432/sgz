(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1145cd15"],{"0a49":function(t,e,a){var i=a("9b43"),n=a("626a"),s=a("4bf8"),r=a("9def"),o=a("cd1c");t.exports=function(t,e){var a=1==t,l=2==t,c=3==t,u=4==t,d=6==t,p=5==t||d,f=e||o;return function(e,o,m){for(var g,h,b=s(e),v=n(b),y=i(o,m,3),D=r(v.length),w=0,j=a?f(e,D):l?f(e,0):void 0;D>w;w++)if((p||w in v)&&(g=v[w],h=y(g,w,b),t))if(a)j[w]=h;else if(h)switch(t){case 3:return!0;case 5:return g;case 6:return w;case 2:j.push(g)}else if(u)return!1;return d?-1:c||u?u:j}}},1169:function(t,e,a){var i=a("2d95");t.exports=Array.isArray||function(t){return"Array"==i(t)}},"11e9":function(t,e,a){var i=a("52a7"),n=a("4630"),s=a("6821"),r=a("6a99"),o=a("69a8"),l=a("c69a"),c=Object.getOwnPropertyDescriptor;e.f=a("9e1e")?c:function(t,e){if(t=s(t),e=r(e,!0),l)try{return c(t,e)}catch(a){}if(o(t,e))return n(!i.f.call(t,e),t[e])}},"20d6":function(t,e,a){"use strict";var i=a("5ca1"),n=a("0a49")(6),s="findIndex",r=!0;s in[]&&Array(1)[s](function(){r=!1}),i(i.P+i.F*r,"Array",{findIndex:function(t){return n(this,t,arguments.length>1?arguments[1]:void 0)}}),a("9c6c")(s)},2649:function(t,e,a){"use strict";var i=a("7e77"),n=a.n(i);n.a},2953:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"adminIndex"},[a("div",{staticClass:"font-13 mb-12 bold flex flex-justify-space-between flex-align-center"},[a("span",[t._v("全盘账管理")]),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:t.addCompany}},[t._v("企业新增")])],1),t.companyData.length>0?a("div",[a("div",{staticClass:"header flex flex-justify-space-between font-13"},[a("span",{staticClass:"bold"},[a("span",[t._v("企业名称：")]),a("span",[t._v(t._s(t.companyData[0]["trade_name"]))])]),a("span",[a("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(e){return t.subject(t.companyData[0].id)}}},[t._v("科目设置")]),a("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(e){return t.addBusiness(t.companyData[0].id)}}},[t._v("新增业务")]),a("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(e){return t.toSaveAnswer(t.companyData[0].id)}}},[t._v("答案绑定")]),a("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(e){return t.editCompany(t.companyData[0])}}},[t._v("编辑")]),a("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(e){return t.delCompany(t.companyData[0].id)}}},[t._v("删除")])],1)]),a("div",[a("el-table",{staticClass:"mb-12",staticStyle:{width:"100%"},attrs:{size:"mini",data:t.companyData[0]["business"],border:"",fit:"","highlight-current-row":""}},[a("el-table-column",{attrs:{label:"业务摘要",width:"",align:""},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.row;return[t._v("\n            "+t._s(a.abstract)+"\n          ")]}}],null,!1,1339650239)}),a("el-table-column",{attrs:{label:"业务内容",width:"",align:""},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.row;return[t._v("\n            "+t._s(a.content)+"\n          ")]}}],null,!1,2128899478)}),a("el-table-column",{attrs:{label:"操作",width:"220",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.row;return[a("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(e){return t.editBusiness(i,t.companyData[0]["id"])}}},[t._v("\n              编辑\n            ")]),a("el-button",{attrs:{type:"text",size:"mini"}},[t._v("\n              删除\n            ")])]}}],null,!1,995041540)})],1),a("el-pagination",{staticClass:"text-center",attrs:{small:"",layout:"prev, pager, next","page-size":t.pageQuery.page_size,"current-page":t.pageQuery.page,total:t.total},on:{"current-change":t.changePageIndex}})],1)]):a("div",{staticClass:"text-center font-13 col-9"},[t._v("\n    暂无数据\n  ")]),t.dialogSubjectVisible?a("div",[a("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],staticClass:"subject-dialog",attrs:{width:"450px",modal:!1,"close-on-click-modal":!1,title:"科目管理",visible:t.dialogSubjectVisible},on:{"update:visible":function(e){t.dialogSubjectVisible=e},dragDialog:t.handleSubjectDrag}},[a("div",{ref:"subjectDiv"},[a("Subject",{attrs:{"company-id":t.companyId,data:t.subjectData}})],1)])],1):t._e(),a("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],staticClass:"company-dialog",attrs:{width:"900px",modal:!1,"close-on-click-modal":!1,title:"企业管理",visible:t.dialogCompanyVisible},on:{"update:visible":function(e){t.dialogCompanyVisible=e},dragDialog:t.handleCompanyDrag}},[a("div",{staticStyle:{height:"600px","overflow-y":"auto",padding:"20px"}},[a("el-form",{ref:"companyForm",attrs:{rules:t.companyRules,model:t.companyFormData,"label-position":"left","label-width":"85px"}},[a("el-form-item",{attrs:{label:"企业名称",prop:"trade_name"}},[a("el-input",{attrs:{size:"mini"},model:{value:t.companyFormData.trade_name,callback:function(e){t.$set(t.companyFormData,"trade_name",e)},expression:"companyFormData.trade_name"}})],1),a("el-form-item",{attrs:{label:"背景信息"}},[a("quill-editor",{attrs:{options:t.editorOption},model:{value:t.companyFormData.material,callback:function(e){t.$set(t.companyFormData,"material",e)},expression:"companyFormData.material"}})],1),a("el-form-item",{attrs:{label:"期初余额表"}},[a("el-upload",{staticClass:"upload-demo",attrs:{action:"https://jsonplaceholder.typicode.com/posts/","file-list":t.listQiChu,"list-type":"picture"}},[a("el-button",{attrs:{size:"small",type:"primary"}},[t._v("点击上传")]),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[t._v("只能上传jpg/png文件，且不超过500kb")])],1)],1)],1)],1),a("div",{ref:"divCompany",staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(e){return t.saveCompany("companyForm")}}},[t._v("\n        确定\n      ")]),a("el-button",{attrs:{size:"mini",plain:""},on:{click:function(e){t.dialogCompanyVisible=!1}}},[t._v("\n        返回\n      ")])],1)]),t.dialogBusinessVisible?a("div",[a("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],staticClass:"business-dialog",attrs:{width:"900px",modal:!1,"close-on-click-modal":!1,title:"业务管理",visible:t.dialogBusinessVisible},on:{"update:visible":function(e){t.dialogBusinessVisible=e},dragDialog:t.handleBusinessDrag}},[a("div",{ref:"businessDiv"},[a("Business",{attrs:{"company-id":t.companyId,"business-data":t.businessData},on:{save:t.saveBusiness}})],1)])],1):t._e()],1)},n=[],s=(a("ac6a"),a("a481"),a("6762"),a("2fdb"),{bind:function(t,e,a){var i=t.querySelector(".el-dialog__header"),n=t.querySelector(".el-dialog");i.style.cssText+=";cursor:move;",n.style.cssText+=";top:0px;";var s=function(){return window.document.currentStyle?function(t,e){return t.currentStyle[e]}:function(t,e){return getComputedStyle(t,!1)[e]}}();i.onmousedown=function(t){var e=t.clientX-i.offsetLeft,r=t.clientY-i.offsetTop,o=n.offsetWidth,l=n.offsetHeight,c=document.body.clientWidth,u=document.body.clientHeight,d=n.offsetLeft,p=c-n.offsetLeft-o,f=n.offsetTop,m=u-n.offsetTop-l,g=s(n,"left"),h=s(n,"top");g.includes("%")?(g=+document.body.clientWidth*(+g.replace(/\%/g,"")/100),h=+document.body.clientHeight*(+h.replace(/\%/g,"")/100)):(g=+g.replace(/\px/g,""),h=+h.replace(/\px/g,"")),document.onmousemove=function(t){var i=t.clientX-e,s=t.clientY-r;-i>d?i=-d:i>p&&(i=p),-s>f?s=-f:s>m&&(s=m),n.style.cssText+=";left:".concat(i+g,"px;top:").concat(s+h,"px;"),a.child.$emit("dragDialog")},document.onmouseup=function(t){document.onmousemove=null,document.onmouseup=null}}}}),r=function(t){t.directive("el-drag-dialog",s)};window.Vue&&(window["el-drag-dialog"]=s,Vue.use(r)),s.install=r;var o=s,l=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"subject"},[a("div",{staticStyle:{height:"300px","overflow-y":"auto"}},[a("el-tree",{attrs:{data:t.subjectData,"node-key":"id","default-expand-all":"","expand-on-click-node":!1},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.node,n=e.data;return a("span",{staticClass:"custom-tree-node"},[a("span",[t._v(t._s(n.title))]),a("span",[a("i",{staticClass:"el-icon-circle-plus-outline tree-icon-blue ml-3",style:"1"===n.level?"margin-right:34px":"",on:{click:function(){return t.addSubject(n)}}}),"1"!==n.level?a("i",{staticClass:"el-icon-edit-outline tree-icon-orange ml-3",on:{click:function(e){return t.editSubject(n)}}}):t._e(),"1"!==n.level?a("i",{staticClass:"el-icon-circle-close tree-icon-red ml-3",on:{click:function(e){return t.delSubject(i,n)}}}):t._e()])])}}])})],1),a("div",{staticClass:"text-right",staticStyle:{padding:"10px"}},[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:t.save}},[t._v("保存")])],1),a("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],staticClass:"subject-detail-dialog",attrs:{width:"400px",modal:!1,"close-on-click-modal":!1,title:"科目管理",visible:t.dialogSubjectVisible},on:{"update:visible":function(e){t.dialogSubjectVisible=e},dragDialog:t.handleSubjectDrag}},[a("el-form",{ref:"subjectForm",attrs:{rules:t.subjectRules,model:t.subjectFormData,"label-position":"left","label-width":"100px"}},[a("el-form-item",{attrs:{label:"科目名称",prop:"title"}},[a("el-input",{attrs:{clearable:"",size:"mini"},model:{value:t.subjectFormData.title,callback:function(e){t.$set(t.subjectFormData,"title",e)},expression:"subjectFormData.title"}})],1)],1),a("div",{ref:"divSubject",staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(e){return t.saveAddSubject("subjectForm")}}},[t._v("\n        确定\n      ")]),a("el-button",{attrs:{size:"small",plain:""},on:{click:function(e){t.dialogSubjectVisible=!1}}},[t._v("\n        返回\n      ")])],1)],1)],1)},c=[],u=(a("20d6"),a("c5f6"),{name:"Subject",directives:{elDragDialog:o},props:{companyId:{type:Number,required:!0,defaults:0},data:{type:Array,required:!0,defaults:[]}},data:function(){return{subjectData:[],dialogSubjectVisible:!1,subjectFormData:{id:"",title:"",parent_id:"",level:""},subjectRules:{title:[{required:!0,message:"请填写科目名称",trigger:"blur"}]},handleData:[],handleIndex:0,resultData:[],resultId:0}},computed:{basicKeMu:function(){return this.$store.state.basicKeMu}},created:function(){this.initData()},methods:{initData:function(){var t=this;this.subjectData=this.basicKeMu,this.subjectData.forEach(function(e){var a=t.getTree(t.data,e.id);a.length>0&&t.$set(e,"children",a)}),this.resultId=this.subjectData.concat(this.data).length+1},getTree:function(t,e){var a=this,i=[];return t.forEach(function(n){if(n.parent_id===e){var s={id:n.id,title:n.title,parent_id:n.parent_id,level:n.level,children:a.getTree(t,n.id)};i.push(s)}}),i},addSubject:function(t){var e=this;this.subjectFormData={id:"",title:"",parent_id:"",level:""},this.handleData=t,this.subjectData.forEach(function(a,i){a===t&&(e.handleIndex=i)}),this.dialogSubjectVisible=!0},editSubject:function(t){this.subjectFormData=t,this.handleData=t,this.dialogSubjectVisible=!0},saveAddSubject:function(t){var e=this;this.$refs[t].validate(function(t){if(t){if(e.subjectFormData.id&&""!==e.subjectFormData.id)e.$set(e.handleData,"title",e.subjectFormData.title);else{var a={id:e.resultId,title:e.subjectFormData.title,parent_id:e.handleData.id,level:parseInt(e.handleData.level)+1};e.handleData.children||e.$set(e.handleData,"children",[]),e.handleData.children.push(a),console.log(e.subjectData),e.resultId+=1}e.dialogSubjectVisible=!1}})},save:function(){var t=this;this.resultData=[],this.subjectData.forEach(function(e){e.children&&t.handleChildren(e.children)}),window.axios.post("/company/add",{id:this.companyId,subject:JSON.stringify(this.resultData)}).then(function(e){var a=e.data;a.error_code?t.$message.error("保存失败"):t.$message.success("保存成功")}).catch(function(t){console.log(t)})},delSubject:function(t,e){this.$confirm("确定要删除吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var a=t.parent,i=a.data.children||a.data,n=i.findIndex(function(t){return t.id===e.id});i.splice(n,1)}).catch(function(){console.log("cancel")})},handleSubjectDrag:function(){this.$refs["divSubject"].blur()},handleChildren:function(t){var e=this;if(!(t&&t.length>0))return!1;t.forEach(function(t){console.log(t),e.resultData.push({id:t.id,title:t.title,parent_id:t.parent_id,level:t.level}),e.handleChildren(t.children)})}}}),d=u,p=(a("2c7b"),a("58a3"),a("2877")),f=Object(p["a"])(d,l,c,!1,null,"5ea188fe",null),m=f.exports,g=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"business"},[a("el-form",{ref:"businessForm",attrs:{rules:t.rules,model:t.formData,"label-position":"left","label-width":"100px"}},[a("el-form-item",{attrs:{label:"业务摘要",prop:"abstract"}},[a("el-input",{attrs:{clearable:"",size:"mini"},model:{value:t.formData.abstract,callback:function(e){t.$set(t.formData,"abstract",e)},expression:"formData.abstract"}})],1),a("el-form-item",{attrs:{label:"业务说明",prop:"content"}},[a("el-input",{attrs:{type:"textarea",rows:2,placeholder:"请填写业务说明",clearable:"",size:"mini"},model:{value:t.formData.content,callback:function(e){t.$set(t.formData,"content",e)},expression:"formData.content"}})],1),a("el-form-item",{attrs:{label:"原始资料上传",prop:"sort"}},[a("el-upload",{staticClass:"upload-demo",attrs:{action:"https://jsonplaceholder.typicode.com/posts/","file-list":t.fileList,"list-type":"picture"}},[a("el-button",{attrs:{size:"small",type:"primary"}},[t._v("点击上传")]),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[t._v("只能上传jpg/png文件，且不超过500kb")])],1)],1),a("el-form-item",{attrs:{label:"原始资料名称",prop:""}},[t.formData.resource&&t.formData.resource.length>0?a("div",t._l(t.formData.resource,function(e,i){return a("div",{key:i,staticClass:"flex flex-align-center"},[a("el-input",{attrs:{placeholder:"请填写原始资料名称",clearable:"",size:"mini"},model:{value:e.name,callback:function(a){t.$set(e,"name",a)},expression:"item.name"}}),a("span",{staticClass:"ml-5"},[a("el-button",{attrs:{size:"mini",plain:""},on:{click:function(e){return t.delMaterial(i)}}},[t._v("删除")])],1)],1)}),0):t._e(),a("div",[a("el-button",{attrs:{size:"mini",plain:"",icon:"el-icon-plus"},on:{click:t.addMaterial}},[t._v("添加一条原始资料")])],1)]),a("el-form-item",{attrs:{label:"文字解析",prop:"content"}},[a("el-input",{attrs:{type:"textarea",rows:2,placeholder:"请填写文字解析",clearable:"",size:"mini"},model:{value:t.formData.textParse,callback:function(e){t.$set(t.formData,"textParse",e)},expression:"formData.textParse"}})],1),a("el-form-item",{attrs:{label:"视频解析",prop:"sort"}},[a("el-upload",{staticClass:"upload-demo",attrs:{action:"https://jsonplaceholder.typicode.com/posts/","list-type":"picture"}},[a("el-button",{attrs:{size:"small",type:"primary"}},[t._v("点击上传")]),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[t._v("只能上传jpg/png文件，且不超过500kb")])],1)],1),a("el-form-item",[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(e){return t.saveBusiness("businessForm")}}},[t._v("保存")])],1)],1)],1)},h=[],b={name:"Business",props:{companyId:{type:Number,required:!0,defaults:0},businessData:{type:Object,required:!0,defaults:{}}},data:function(){return{formData:{abstract:"",content:"",resource:[{url:"",name:""}],textParse:"",videoParse:""},imageUrl:[],rules:{abstract:[{required:!0,message:"请填写业务摘要",trigger:"blur"}],number:[{required:!0,message:"请填写编号",trigger:"blur"}]},fileList:[]}},created:function(){this.initData()},methods:{initData:function(){"{}"!==JSON.stringify(this.businessData)?(this.formData={id:this.businessData.id,abstract:this.businessData.abstract,content:this.businessData.content,resource:JSON.parse(this.businessData.resource),textParse:this.businessData.textParse,videoParse:this.businessData.videoParse},this.formData.resource.length>0&&(this.fileList=this.formData.resource)):this.formData={abstract:"",content:"",resource:[{url:"",name:""}],textParse:"",videoParse:""}},addMaterial:function(){this.formData.resource.push({url:"",name:""})},delMaterial:function(t){this.formData.resource.length>1?this.formData.resource.splice(t,1):this.$message.warning("至少保留一条原始资料")},saveBusiness:function(t){var e=this;this.$refs[t].validate(function(t){if(t){var a={trade_id:e.companyId,abstract:e.formData.abstract,content:e.formData.content,resource:JSON.stringify(e.formData.resource),textParse:e.formData.textParse,videoParse:e.formData.videoParse};e.formData.id&&(a.id=e.formData.id),window.axios.post("/exam/add",a).then(function(t){var a=t.data;a.error_code?e.$message.error("保存失败"):(e.$message.success("保存成功"),e.$emit("save"))}).catch(function(t){console.log(t)})}})}}},v=b,y=(a("aea1"),Object(p["a"])(v,g,h,!1,null,"1fc6fe62",null)),D=y.exports,w=a("953d");const j={watcher:{},active:null,on:function(t,e){this.watcher[t]||(this.watcher[t]=e)},emit:function(t,e=1){this.active=this.watcher[t],1===e&&_()}};class x{constructor(t,e={}){this.id=Math.random(),this.quill=t,this.quill.id=this.id,this.config=e,this.file="",this.imgURL="",t.root.addEventListener("paste",this.pasteHandle.bind(this),!1),t.root.addEventListener("drop",this.dropHandle.bind(this),!1),t.root.addEventListener("dropover",function(t){t.preventDefault()},!1),this.cursorIndex=0,j.on(this.id,this)}pasteHandle(t){j.emit(this.quill.id,0);let e,a,i,n=t.clipboardData,s=0;if(n){if(e=n.items,!e)return;for(a=e[0],i=n.types||[];s<i.length;s++)if("Files"===i[s]){a=e[s];break}if(a&&"file"===a.kind&&a.type.match(/^image\//i)){this.file=a.getAsFile();let t=this;if(t.config.size&&t.file.size>=1024*t.config.size*1024)return void(t.config.sizeError&&t.config.sizeError());this.config.action}}}dropHandle(t){j.emit(this.quill.id,0);const e=this;t.preventDefault(),e.config.size&&e.file.size>=1024*e.config.size*1024?e.config.sizeError&&e.config.sizeError():(e.file=t.dataTransfer.files[0],this.config.action?e.uploadImg():e.toBase64())}toBase64(){const t=this,e=new FileReader;e.onload=e=>{t.imgURL=e.target.result,t.insertImg()},e.readAsDataURL(t.file)}uploadImg(){const t=this;t.quillLoading;let e=t.config,a=new FormData;a.append(e.name,t.file),e.editForm&&e.editForm(a);let i=new XMLHttpRequest;i.open("post",e.action,!0),e.headers&&e.headers(i),e.change&&e.change(i,a),i.onreadystatechange=function(){if(4===i.readyState)if(200===i.status){let a=JSON.parse(i.responseText);t.imgURL=e.response(a),j.active.uploadSuccess(),t.insertImg(),t.config.success&&t.config.success()}else t.config.error&&t.config.error(),j.active.uploadError()},i.upload.onloadstart=function(t){j.active.uploading(),e.start&&e.start()},i.upload.onprogress=function(t){let e=(t.loaded/t.total*100|0)+"%";j.active.progress(e)},i.upload.onerror=function(t){j.active.uploadError(),e.error&&e.error()},i.upload.onloadend=function(t){e.end&&e.end()},i.send(a)}insertImg(){const t=j.active;t.quill.insertEmbed(j.active.cursorIndex,"image",t.imgURL),t.quill.update(),t.quill.setSelection(t.cursorIndex+1)}progress(t){t="[uploading"+t+"]",j.active.quill.root.innerHTML=j.active.quill.root.innerHTML.replace(/\[uploading.*?\]/,t)}uploading(){let t=(j.active.quill.getSelection()||{}).index||j.active.quill.getLength();j.active.cursorIndex=t,j.active.quill.insertText(j.active.cursorIndex,"[uploading...]",{color:"red"},!0)}uploadError(){j.active.quill.root.innerHTML=j.active.quill.root.innerHTML.replace(/\[uploading.*?\]/,"[upload error]")}uploadSuccess(){j.active.quill.root.innerHTML=j.active.quill.root.innerHTML.replace(/\[uploading.*?\]/,"")}}function _(){let t=document.querySelector(".quill-image-input");null===t&&(t=document.createElement("input"),t.setAttribute("type","file"),t.classList.add("quill-image-input"),t.style.display="none",t.addEventListener("change",function(){let e=j.active;e.file=t.files[0],t.value="",e.config.size&&e.file.size>=1024*e.config.size*1024?e.config.sizeError&&e.config.sizeError():e.config.action?e.uploadImg():e.toBase64()}),document.body.appendChild(t)),t.click()}w["Quill"].register("modules/ImageExtend",x);var S={name:"AdminIndex",components:{Business:D,Subject:m},directives:{elDragDialog:o},data:function(){var t=this;return{activeName:"first",companyData:[],subjectData:[],businessData:{},dialogSubjectVisible:!1,companyId:0,dialogCompanyVisible:!1,companyRules:{trade_name:[{required:!0,message:"请填写企业名称",trigger:"blur"}]},companyFormData:{trade_name:"",material:"",qi_chu:""},pageQuery:{page:1,page_size:1},total:0,dialogBusinessVisible:!1,listQiChu:[],editorOption:{modules:{ImageExtend:{loading:!0,name:"file",size:1,action:window.host+"uploadEditorImg",response:function(e){if(1===e.status)return e.resultData;t.$message.error(e.info)},sizeError:function(){t.$message.error("图片尺寸最大为1M")},headers:function(e){e.setRequestHeader("token",t.$store.state.access_token_teacher)}},toolbar:{container:["bold","italic","underline",{script:"sub"},{script:"super"},"clean","image"],handlers:{image:function(){j.emit(this.quill.id)}}}}}}},created:function(){this.initData()},methods:{initData:function(){var t=this;window.axios.post("/company/list?page=".concat(this.pageQuery.page,"&&page_size=").concat(this.pageQuery.page_size)).then(function(e){var a=e.data;a.error_code?t.$message.error("请求失败"):(t.companyData=a.data.data,t.total=a.data.total,t.companyData[0]["subject"]&&""!==t.companyData[0]["subject"]?t.subjectData=JSON.parse(t.companyData[0]["subject"]):t.subjectData=[])}).catch(function(t){console.log(t)})},addCompany:function(){var t=this;this.companyFormData={trade_name:"",material:'<p style="white-space: normal;"><img src="http://www.wenyunjy.com:8081/Uploads/ueImage/20180526/1527304102667327.jpg" title="1500255209245050.jpg"/></p><p style="white-space: normal;"><img src="http://www.wenyunjy.com:8081/Uploads/ueImage/20180526/1527304102492960.jpg" title="1500255209203102.jpg"/></p><p style="white-space: normal;"><img src="http://www.wenyunjy.com:8081/Uploads/ueImage/20180526/1527304102419714.jpg" title="1500255209925022.jpg"/></p><p style="white-space: normal;"><img src="http://www.wenyunjy.com:8081/Uploads/ueImage/20180526/1527304731358168.jpg" title="1500255257431719.jpg"/></p><p style="white-space: normal;"><img src="http://www.wenyunjy.com:8081/Uploads/ueImage/20180526/1527304731416762.jpg" title="1500255257394861.jpg"/></p><p><img src="http://www.wenyunjy.com:8081/Uploads/ueImage/20180526/1527304808298965.jpg" title="1500254541330256.jpg" alt="了解三：企业主要税收征收政策.jpg" style="white-space: normal;"/></p><p><img src="http://www.wenyunjy.com:8081/Uploads/ueImage/20180526/1527313849503003.jpg" title="1500254593418550.jpg" alt="了解四：账簿组织概述.jpg" style="white-space: normal;"/></p><p style="white-space: normal;"><img src="http://www.wenyunjy.com:8081/Uploads/ueImage/20180526/1527313883602407.jpg" title="1500686362155841.jpg"/></p><p style="white-space: normal;"><img src="http://www.wenyunjy.com:8081/Uploads/ueImage/20180526/1527313883498343.jpg" title="1500686367688571.jpg"/></p><p style="white-space: normal;"><img src="http://www.wenyunjy.com:8081/Uploads/ueImage/20180526/1527313883234030.jpg" title="1500686374617496.jpg"/></p><p><img src="http://www.wenyunjy.com:8081/Uploads/ueImage/20180526/1527313933589344.jpg" title="1500254873934369.jpg" alt="了解六：会计科目.jpg" style="white-space: normal;"/></p>',qi_chu:JSON.stringify(["/Uploads/ueImage/20181212/1544603457867972.jpg","/Uploads/ueImage/20181212/1544603462375950.jpg","/Uploads/ueImage/20181212/1544603466237929.jpg","/Uploads/ueImage/20181212/1544603473197232.jpg","/Uploads/ueImage/20181212/1544603477389145.jpg"])},this.dialogCompanyVisible=!0,this.$nextTick(function(){t.$refs["companyForm"].clearValidate()})},editCompany:function(t){var e=this;this.companyFormData=Object.assign(t);var a=[];this.companyFormData.qi_chu.length>0&&this.companyFormData.qi_chu.forEach(function(t){a.push({url:"http://www.wenyunjy.com:8081"+t,name:"期初余额表"})}),this.listQiChu=a,this.dialogCompanyVisible=!0,this.$nextTick(function(){e.$refs["companyForm"].clearValidate()})},delCompany:function(t){var e=this;this.$confirm("确定要删除吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){window.axios.post("/company/del",{id:t}).then(function(t){var a=t.data;a.error_code?e.$message.error("保存失败"):(e.$message.success("删除成功"),e.pageQuery.page=e.pageQuery.page-1,e.initData())}).catch(function(t){console.log(t)})}).catch(function(){console.log("cancel")})},subject:function(t){this.companyId=t,this.dialogSubjectVisible=!0},saveCompany:function(t){var e=this;this.$refs[t].validate(function(t){t&&window.axios.post("/company/add",e.companyFormData).then(function(t){var a=t.data;a.error_code?e.$message.error("保存失败"):(e.$message.success("保存成功"),e.dialogCompanyVisible=!1,e.initData())}).catch(function(t){console.log(t)})})},addBusiness:function(t){this.companyId=t,this.businessData={},this.dialogBusinessVisible=!0},editBusiness:function(t,e){this.companyId=e,this.businessData=t,this.dialogBusinessVisible=!0},saveBusiness:function(){this.dialogBusinessVisible=!1,this.initData()},toSaveAnswer:function(t){window.open("/shou_gong_zhang/#/home/".concat(t,"/teacher"))},handleSubjectDrag:function(){this.$refs["subjectDiv"].blur()},handleCompanyDrag:function(){this.$refs["divCompany"].blur()},handleBusinessDrag:function(){this.$refs["businessDiv"].blur()},changePageIndex:function(t){this.pageQuery.page=t,this.initData()}}},I=S,C=(a("6965"),a("2649"),Object(p["a"])(I,i,n,!1,null,"5587b949",null));e["default"]=C.exports},"2c7b":function(t,e,a){"use strict";var i=a("66f9"),n=a.n(i);n.a},"2fdb":function(t,e,a){"use strict";var i=a("5ca1"),n=a("d2c8"),s="includes";i(i.P+i.F*a("5147")(s),"String",{includes:function(t){return!!~n(this,t,s).indexOf(t,arguments.length>1?arguments[1]:void 0)}})},"301d":function(t,e,a){},5147:function(t,e,a){var i=a("2b4c")("match");t.exports=function(t){var e=/./;try{"/./"[t](e)}catch(a){try{return e[i]=!1,!"/./"[t](e)}catch(n){}}return!0}},"58a3":function(t,e,a){"use strict";var i=a("5db2"),n=a.n(i);n.a},"5db2":function(t,e,a){},"5dbc":function(t,e,a){var i=a("d3f4"),n=a("8b97").set;t.exports=function(t,e,a){var s,r=e.constructor;return r!==a&&"function"==typeof r&&(s=r.prototype)!==a.prototype&&i(s)&&n&&n(t,s),t}},"66f9":function(t,e,a){},6762:function(t,e,a){"use strict";var i=a("5ca1"),n=a("c366")(!0);i(i.P,"Array",{includes:function(t){return n(this,t,arguments.length>1?arguments[1]:void 0)}}),a("9c6c")("includes")},6965:function(t,e,a){"use strict";var i=a("301d"),n=a.n(i);n.a},"7e77":function(t,e,a){},"8b97":function(t,e,a){var i=a("d3f4"),n=a("cb7c"),s=function(t,e){if(n(t),!i(e)&&null!==e)throw TypeError(e+": can't set as prototype!")};t.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(t,e,i){try{i=a("9b43")(Function.call,a("11e9").f(Object.prototype,"__proto__").set,2),i(t,[]),e=!(t instanceof Array)}catch(n){e=!0}return function(t,a){return s(t,a),e?t.__proto__=a:i(t,a),t}}({},!1):void 0),check:s}},9093:function(t,e,a){var i=a("ce10"),n=a("e11e").concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return i(t,n)}},a481:function(t,e,a){"use strict";var i=a("cb7c"),n=a("4bf8"),s=a("9def"),r=a("4588"),o=a("0390"),l=a("5f1b"),c=Math.max,u=Math.min,d=Math.floor,p=/\$([$&`']|\d\d?|<[^>]*>)/g,f=/\$([$&`']|\d\d?)/g,m=function(t){return void 0===t?t:String(t)};a("214f")("replace",2,function(t,e,a,g){return[function(i,n){var s=t(this),r=void 0==i?void 0:i[e];return void 0!==r?r.call(i,s,n):a.call(String(s),i,n)},function(t,e){var n=g(a,t,this,e);if(n.done)return n.value;var d=i(t),p=String(this),f="function"===typeof e;f||(e=String(e));var b=d.global;if(b){var v=d.unicode;d.lastIndex=0}var y=[];while(1){var D=l(d,p);if(null===D)break;if(y.push(D),!b)break;var w=String(D[0]);""===w&&(d.lastIndex=o(p,s(d.lastIndex),v))}for(var j="",x=0,_=0;_<y.length;_++){D=y[_];for(var S=String(D[0]),I=c(u(r(D.index),p.length),0),C=[],k=1;k<D.length;k++)C.push(m(D[k]));var L=D.groups;if(f){var F=[S].concat(C,I,p);void 0!==L&&F.push(L);var z=String(e.apply(void 0,F))}else z=h(S,p,I,C,L,e);I>=x&&(j+=p.slice(x,I)+z,x=I+S.length)}return j+p.slice(x)}];function h(t,e,i,s,r,o){var l=i+t.length,c=s.length,u=f;return void 0!==r&&(r=n(r),u=p),a.call(o,u,function(a,n){var o;switch(n.charAt(0)){case"$":return"$";case"&":return t;case"`":return e.slice(0,i);case"'":return e.slice(l);case"<":o=r[n.slice(1,-1)];break;default:var u=+n;if(0===u)return a;if(u>c){var p=d(u/10);return 0===p?a:p<=c?void 0===s[p-1]?n.charAt(1):s[p-1]+n.charAt(1):a}o=s[u-1]}return void 0===o?"":o})}})},aa77:function(t,e,a){var i=a("5ca1"),n=a("be13"),s=a("79e5"),r=a("fdef"),o="["+r+"]",l="​",c=RegExp("^"+o+o+"*"),u=RegExp(o+o+"*$"),d=function(t,e,a){var n={},o=s(function(){return!!r[t]()||l[t]()!=l}),c=n[t]=o?e(p):r[t];a&&(n[a]=c),i(i.P+i.F*o,"String",n)},p=d.trim=function(t,e){return t=String(n(t)),1&e&&(t=t.replace(c,"")),2&e&&(t=t.replace(u,"")),t};t.exports=d},ac6a:function(t,e,a){for(var i=a("cadf"),n=a("0d58"),s=a("2aba"),r=a("7726"),o=a("32e9"),l=a("84f2"),c=a("2b4c"),u=c("iterator"),d=c("toStringTag"),p=l.Array,f={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},m=n(f),g=0;g<m.length;g++){var h,b=m[g],v=f[b],y=r[b],D=y&&y.prototype;if(D&&(D[u]||o(D,u,p),D[d]||o(D,d,b),l[b]=p,v))for(h in i)D[h]||s(D,h,i[h],!0)}},aea1:function(t,e,a){"use strict";var i=a("f460"),n=a.n(i);n.a},c5f6:function(t,e,a){"use strict";var i=a("7726"),n=a("69a8"),s=a("2d95"),r=a("5dbc"),o=a("6a99"),l=a("79e5"),c=a("9093").f,u=a("11e9").f,d=a("86cc").f,p=a("aa77").trim,f="Number",m=i[f],g=m,h=m.prototype,b=s(a("2aeb")(h))==f,v="trim"in String.prototype,y=function(t){var e=o(t,!1);if("string"==typeof e&&e.length>2){e=v?e.trim():p(e,3);var a,i,n,s=e.charCodeAt(0);if(43===s||45===s){if(a=e.charCodeAt(2),88===a||120===a)return NaN}else if(48===s){switch(e.charCodeAt(1)){case 66:case 98:i=2,n=49;break;case 79:case 111:i=8,n=55;break;default:return+e}for(var r,l=e.slice(2),c=0,u=l.length;c<u;c++)if(r=l.charCodeAt(c),r<48||r>n)return NaN;return parseInt(l,i)}}return+e};if(!m(" 0o1")||!m("0b1")||m("+0x1")){m=function(t){var e=arguments.length<1?0:t,a=this;return a instanceof m&&(b?l(function(){h.valueOf.call(a)}):s(a)!=f)?r(new g(y(e)),a,m):y(e)};for(var D,w=a("9e1e")?c(g):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),j=0;w.length>j;j++)n(g,D=w[j])&&!n(m,D)&&d(m,D,u(g,D));m.prototype=h,h.constructor=m,a("2aba")(i,f,m)}},cd1c:function(t,e,a){var i=a("e853");t.exports=function(t,e){return new(i(t))(e)}},d2c8:function(t,e,a){var i=a("aae3"),n=a("be13");t.exports=function(t,e,a){if(i(e))throw TypeError("String#"+a+" doesn't accept regex!");return String(n(t))}},e853:function(t,e,a){var i=a("d3f4"),n=a("1169"),s=a("2b4c")("species");t.exports=function(t){var e;return n(t)&&(e=t.constructor,"function"!=typeof e||e!==Array&&!n(e.prototype)||(e=void 0),i(e)&&(e=e[s],null===e&&(e=void 0))),void 0===e?Array:e}},f460:function(t,e,a){},fdef:function(t,e){t.exports="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff"}}]);
//# sourceMappingURL=chunk-1145cd15.e3fbcc8c.js.map